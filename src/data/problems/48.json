{
  "id": "48",
  "title": "简易压缩算法一种字符串压缩表示的解压",
  "examType": "A",
  "score": 100,
  "description": "有一种简易压缩算法：针对全部为小写英文字母组成的字符串， 将其中连续超过两个相同字母的部分压缩为连续个数加该字母 其他部分保持原样不变.\n例如字符串aaabbccccd 经过压缩变成字符串 3abb4cd\n请您编写解压函数,根据输入的字符串,判断其是否为合法压缩过的字符串\n若输入合法则输出解压缩后的字符串否则输出字符串!error来报告错误",
  "inputDesc": "输入一行，为一个 ASCII 字符串\n长度不超过100字符\n用例保证输出的字符串长度也不会超过100字符串",
  "outputDesc": "若判断输入为合法的经过压缩后的字符串\n则输出压缩前的字符串\n若输入不合法 则输出字符串!error",
  "examples": [
    {
      "input": "4dff",
      "output": "ddddff",
      "explanation": "4d扩展为4个d，ff保持不变。\n解压后的字符串为ddddff。"
    },
    {
      "input": "2dff",
      "output": "!error",
      "explanation": "数字2表示2个d，但2个相同字母不需要压缩。\n压缩规则是连续超过2个才压缩，故输入不合法。"
    },
    {
      "input": "4d@A",
      "output": "!error",
      "explanation": "压缩后的字符串只包含小写字母和数字。\n出现特殊字符@和大写字母A，输入不合法。"
    },
    {
      "input": "3abb4cd",
      "output": "aaabbccccd",
      "explanation": "3a→aaa，bb保持，4c→cccc，d保持。\n解压结果：aaabbccccd。"
    }
  ],
  "solution": "题目要求我们编写一个函数来判断一个字符串是否是经过合法压缩后的字符串，并且能够解压缩这个字符串。如果字符串不合法，则返回!error。\n连续超过两个相同的字母，将它们压缩为数字 + 字母的形式。例如，aaa压缩为3a，cccc压缩为4c。字符串中的其他部分保持原样。\n字符串中只允许包含小写字母和数字，不允许出现其他字符。数字必须大于2，因为两个或更少个相同字母不应该压缩。数字后面必须跟随一个小写字母，且该数字应扩展为对应数量的字母。",
  "codes": {
    "java": "import java.util.Scanner;\nimport java.util.regex.Pattern;\nimport java.util.regex.Matcher;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        \n        // 读取输入字符串\n        String s = scanner.nextLine();\n        \n        // 定义匹配非法字符的正则表达式（非数字和小写字母的字符）\n        String pat = \"[^0-9a-z]\";\n        \n        // 用于存储数字部分的字符串\n        String num = \"\";\n        \n        // 用于存储最终解压缩的结果\n        String res = \"\";\n        \n        // 编译正则表达式\n        Pattern pattern = Pattern.compile(pat);\n        Matcher matcher = pattern.matcher(s);\n        \n        // 如果找到非法字符，则直接输出 \"!error\"\n        if (matcher.find()) {\n            res = \"!error\";\n        } else {\n            // 遍历输入字符串的每一个字符\n            for (int i = 0; i < s.length(); i++) {\n                char c = s.charAt(i);\n                \n                // 如果当前字符是数字，则将其追加到 num 中\n                if (Character.isDigit(c)) {\n                    num += c;\n                } \n                // 如果 num 不为空，表示之前有数字，需要进行解压操作\n                else if (!num.equals(\"\")) {\n                    // 判断数字是否小于等于2，如果是则输入不合法\n                    if (Integer.parseInt(num) <= 2) {\n                        res = \"!error\";\n                        break;\n                    } else {\n                        // 将对应数量的字母添加到结果中\n                        for (int j = 0; j < Integer.parseInt(num); j++) {\n                            res += c;\n                        }\n                        // 重置 num 为空\n                        num = \"\";\n                    }\n                } \n                // 如果当前字符是字母，且前面没有数字，则直接添加到结果中\n                else {\n                    res += c;\n                }\n            }\n        }\n        \n        // 输出最终结果\n        System.out.println(res);\n    }\n}",
    "python": "import re\n\n# 读取输入字符串\ns = input()\n\n# 定义匹配非法字符的正则表达式（非数字和小写字母的字符）\npat = \"[^0-9a-z]\"\n\n# 用于存储数字部分的字符串\nnum = \"\"\n\n# 用于存储最终解压缩的结果\nres = \"\"\n\n# 编译正则表达式并查找非法字符\npattern = re.compile(pat)\nmatcher = pattern.search(s)\n\n# 如果找到非法字符，则直接输出 \"!error\"\nif matcher:\n    res = \"!error\"\nelse:\n    # 遍历输入字符串的每一个字符\n    for i in range(len(s)):\n        c = s[i]\n        \n        # 如果当前字符是数字，则将其追加到 num 中\n        if c.isdigit():\n            num += c\n        # 如果 num 不为空，表示之前有数字，需要进行解压操作\n        elif num != \"\":\n            # 判断数字是否小于等于2，如果是则输入不合法\n            if int(num) <= 2:\n                res = \"!error\"\n                break\n            else:\n                # 将对应数量的字母添加到结果中\n                for j in range(int(num)):\n                    res += c\n                # 重置 num 为空\n                num = \"\"\n        # 如果当前字符是字母，且前面没有数字，则直接添加到结果中\n        else:\n            res += c\n\n# 输出最终结果\nprint(res)",
    "javascript": "const readline = require('readline');\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nrl.on('line', (s) => {\n  // 定义匹配非法字符的正则表达式（非数字和小写字母的字符）\n  const pat = '[^0-9a-z]';\n  \n  // 用于存储数字部分的字符串\n  let num = \"\";\n  \n  // 用于存储最终解压缩的结果\n  let res = \"\";\n\n  // 如果字符串包含非法字符，则输出 \"!error\"\n  if (s.match(pat) !== null) {\n    res = \"!error\";\n  } else {\n    // 遍历输入字符串的每一个字符\n    for (let i = 0; i < s.length; i++) {\n      const c = s[i];\n      \n      // 如果当前字符是数字，则将其追加到 num 中\n      if (c.match(/[0-9]/)) {\n        num += c;\n      } \n      // 如果 num 不为空，表示之前有数字，需要进行解压操作\n      else if (num !== \"\") {\n        // 判断数字是否小于等于2，如果是则输入不合法\n        if (parseInt(num) <= 2) {\n          res = \"!error\";\n          break;\n        } else {\n          // 将对应数量的字母添加到结果中\n          res += c.repeat(parseInt(num));\n          // 重置 num 为空\n          num = \"\";\n        }\n      } \n      // 如果当前字符是字母，且前面没有数字，则直接添加到结果中\n      else {\n        res += c;\n      }\n    }\n  }\n  \n  // 输出最终结果\n  console.log(res);\n  rl.close();\n});",
    "cpp": "#include <iostream>\n#include <regex>\nusing namespace std;\n\nint main() {\n    // 读取输入字符串\n    string s;\n    cin >> s;\n\n    // 定义匹配非法字符的正则表达式（非数字和小写字母的字符）\n    string pat = \"[^0-9a-z]\";\n    \n    // 用于存储数字部分的字符串\n    string num = \"\";\n    \n    // 用于存储最终解压缩的结果\n    string res = \"\";\n    \n    // 如果字符串包含非法字符，则输出 \"!error\"\n    if (regex_search(s, regex(pat))) {\n        res = \"!error\";\n    } else {\n        // 遍历输入字符串的每一个字符\n        for (char c : s) {\n            // 如果当前字符是数字，则将其追加到 num 中\n            if (isdigit(c)) {\n                num += c;\n            } \n            // 如果 num 不为空，表示之前有数字，需要进行解压操作\n            else if (num != \"\") {\n                // 判断数字是否小于等于2，如果是则输入不合法\n                if (stoi(num) <= 2) {\n                    res = \"!error\";\n                    break;\n                } else {\n                    // 将对应数量的字母添加到结果中\n                    res += string(stoi(num), c);\n                    // 重置 num 为空\n                    num = \"\";\n                }\n            } \n            // 如果当前字符是字母，且前面没有数字，则直接添加到结果中\n            else {\n                res += c;\n            }\n        }\n    }\n\n    // 输出最终结果\n    cout << res << endl;\n    return 0;\n}",
    "c": "#include <stdio.h>\n#include <string.h>\n#include <ctype.h>\n#include <stdlib.h>\n#include <stdbool.h>\n\n// 定义一个函数，用于检查字符串中是否包含非法字符\nbool contains_invalid_characters(const char *s) {\n    while (*s) {\n        // 如果字符不是数字或小写字母，则认为是非法字符\n        if (!isdigit(*s) && !islower(*s)) {\n            return true;\n        }\n        s++;\n    }\n    return false;\n}\n\nint main() {\n    // 定义存储输入字符串的数组\n    char s[1000];\n    \n    // 读取输入字符串\n    scanf(\"%s\", s);\n\n    // 用于存储数字部分的字符串\n    char num[100] = \"\";\n    \n    // 用于存储最终解压缩的结果\n    char res[1000] = \"\";\n    \n    // 如果字符串包含非法字符，则输出 \"!error\"\n    if (contains_invalid_characters(s)) {\n        strcpy(res, \"!error\");\n    } else {\n        // 遍历输入字符串的每一个字符\n        for (int i = 0; s[i] != '\\0'; i++) {\n            char c = s[i];\n            \n            // 如果当前字符是数字，则将其追加到 num 中\n            if (isdigit(c)) {\n                strncat(num, &c, 1);\n            } \n            // 如果 num 不为空，表示之前有数字，需要进行解压操作\n            else if (strlen(num) > 0) {\n                // 判断数字是否小于等于2，如果是则输入不合法\n                int repeat_count = atoi(num);\n                if (repeat_count <= 2) {\n                    strcpy(res, \"!error\");\n                    break;\n                } else {\n                    // 将对应数量的字母添加到结果中\n                    for (int j = 0; j < repeat_count; j++) {\n                        strncat(res, &c, 1);\n                    }\n                    // 重置 num 为空\n                    num[0] = '\\0';\n                }\n            } \n            // 如果当前字符是字母，且前面没有数字，则直接添加到结果中\n            else {\n                strncat(res, &c, 1);\n            }\n        }\n    }\n\n    // 输出最终结果\n    printf(\"%s\\n\", res);\n    return 0;\n}"
  }
}