{
  "id": "39",
  "title": "水仙花数 Ⅰ",
  "examType": "A",
  "score": 100,
  "description": "所谓水仙花数，是指一个n位的正整数，其各位数字的n次方和等于该数本身。\n例如153是水仙花数，153是一个3位数，并且153 = 1^3 + 5^3 + 3^3。",
  "inputDesc": "第一行输入一个整数n，表示一个n位的正整数。n在3到7之间，包含3和7。\n第二行输入一个正整数m，表示需要返回第m个水仙花数。",
  "outputDesc": "返回长度是n的第m个水仙花数。个数从0开始编号。\n若m大于水仙花数的个数，返回最后一个水仙花数和m的乘积。\n若输入不合法，返回-1。",
  "examples": [
    {
      "input": "3\n0",
      "output": "153",
      "explanation": "n=3，求第0个3位水仙花数。\n3位水仙花数有：153, 370, 371, 407（共4个）。\n153 = 1³ + 5³ + 3³ = 1 + 125 + 27 = 153 ✓\n第0个是153。"
    },
    {
      "input": "3\n3",
      "output": "407",
      "explanation": "n=3，求第3个3位水仙花数。\n3位水仙花数有：153, 370, 371, 407。\n第3个是407。"
    },
    {
      "input": "3\n10",
      "output": "4070",
      "explanation": "n=3，求第10个3位水仙花数。\n但3位水仙花数只有4个，m=10超过数量。\n返回最后一个水仙花数407乘以m=10，即407×10=4070。"
    },
    {
      "input": "9\n0",
      "output": "-1",
      "explanation": "n=9不在[3,7]范围内，输入不合法，返回-1。"
    }
  ],
  "solution": "**解题思路：**\n\n本题是一道**数学+枚举**问题。\n\n**什么是水仙花数：**\n- n位数，其各位数字的n次方之和等于该数本身\n- 例如：153 = 1³ + 5³ + 3³\n\n**算法步骤：**\n\n1. 判断输入合法性，n必须在[3,7]范围内\n2. 确定n位数的范围：[10^(n-1), 10^n)\n3. 遍历范围内所有数，判断是否为水仙花数\n4. 将所有水仙花数存入列表\n5. 根据m返回结果：\n   - m < 列表长度：返回第m个\n   - m >= 列表长度：返回最后一个 × m\n\n**时间复杂度**：O(10^n × n)",
  "codes": {
    "java": "import java.util.*;\n\npublic class Main {\n     public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        \n        // 输入n和m\n        int n = sc.nextInt();\n        int m = sc.nextInt();\n        \n        // 判断输入是否合法\n        if (n < 3 || n > 7) {\n            System.out.println(\"-1\");\n            return;\n        }\n        \n        // 计算水仙花数的范围\n        int start = (int) Math.pow(10, n - 1);\n        int end = (int) Math.pow(10, n);\n        \n        // 存储水仙花数的列表\n        List<Integer> narcissusList = new ArrayList<>();\n        \n        // 遍历范围内的数，判断是否为水仙花数并加入列表\n        for (int i = start; i < end; i++) {\n            if (isNarcissusNumber(i, n)) {\n                narcissusList.add(i);\n            }\n        }\n        \n        // 获取水仙花数列表的长度\n        int size = narcissusList.size();\n        \n        // 若列表为空，输出-1\n        if (size == 0) {\n            System.out.println(\"-1\");\n            return;\n        }\n        \n        // 输出第m个水仙花数，若m大于列表长度，则输出最后一个水仙花数乘以m\n        System.out.println(m >= size ? narcissusList.get(size - 1) : narcissusList.get(m));\n    }\n    \n    // 判断一个数是否为水仙花数\n    public static boolean isNarcissusNumber(int num, int n) {\n        int sum = 0;\n        String numStr = String.valueOf(num);\n        \n        // 计算各位数字的n次方和\n        for (int i = 0; i < n; i++) {\n            sum += Math.pow(Integer.parseInt(numStr.substring(i, i + 1)), n);\n        }\n        \n        // 判断是否为水仙花数\n        return sum == num;\n    }\n}",
    "python": "def isNarcissusNumber(num, n):\n    sum = 0\n    numStr = str(num)\n\n    for i in range(n):\n        sum += int(numStr[i]) ** n\n\n    return sum == num\nn = int(input())\nm = int(input())\n\nif n < 3 or n > 7:\n    print(\"-1\")\n    exit()\n\nstart = 10 ** (n - 1)\nend = 10 ** n\n\nnarcissusList = []\n\nfor i in range(start, end):\n    if isNarcissusNumber(i, n):\n        narcissusList.append(i)\n\nsize = len(narcissusList)\n\nif size == 0:\n    print(\"-1\")\n    exit()\n\nprint(narcissusList[size - 1] if m >= size else narcissusList[m])",
    "javascript": "const readline = require('readline');\n\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nrl.on('line', (n) => {\n  rl.on('line', (m) => {\n    n= parseInt(n);\n    m= parseInt(m);\n // 判断输入是否合法\n  if (n < 3 || n > 7) {\n    console.log(\"-1\");\n    rl.close();\n    return;\n  }\n  \n  // 计算水仙花数的范围\n  const start = Math.pow(10, n - 1);\n  const end = Math.pow(10, n);\n  \n  // 存储水仙花数的列表\n  const narcissusList = [];\n  \n  // 遍历范围内的数，判断是否为水仙花数并加入列表\n  for (let i = start; i < end; i++) {\n    if (isNarcissusNumber(i, n)) {\n      narcissusList.push(i);\n    }\n  }\n  \n  // 获取水仙花数列表的长度\n  const size = narcissusList.length;\n  \n  // 若列表为空，输出-1\n  if (size === 0) {\n    console.log(\"-1\");\n    rl.close();\n    return;\n  }\n  \n  // 输出第m个水仙花数，若m大于列表长度，则输出最后一个水仙花数乘以m\n  console.log(m >= size ? narcissusList[size - 1] : narcissusList[m]);\n  \n  rl.close();\n});\n});\n \n\n// 判断一个数是否为水仙花数\nfunction isNarcissusNumber(num, n) {\n  let sum = 0;\n  const numStr = String(num);\n  \n  // 计算各位数字的n次方和\n  for (let i = 0; i < n; i++) {\n    sum += Math.pow(parseInt(numStr.substring(i, i + 1)), n);\n  }\n  \n  // 判断是否为水仙花数\n  return sum === num;\n}",
    "cpp": "#include <iostream>\n#include <vector>\n#include <cmath>\nusing namespace std;\n\nbool isNarcissusNumber(int num, int n) {\n    int sum = 0;\n    string numStr = to_string(num);\n    \n    for (int i = 0; i < n; i++) {\n        sum += pow(stoi(numStr.substr(i, 1)), n);\n    }\n    \n    return sum == num;\n}\n\nint main() {\n    int n, m;\n    cin >> n >> m;\n    \n    if (n < 3 || n > 7) {\n        cout << \"-1\" << endl;\n        return 0;\n    }\n    \n    int start = pow(10, n - 1);\n    int end = pow(10, n);\n    \n    vector<int> narcissusList;\n    \n    for (int i = start; i < end; i++) {\n        if (isNarcissusNumber(i, n)) {\n            narcissusList.push_back(i);\n        }\n    }\n    \n    int size = narcissusList.size();\n    \n    if (size == 0) {\n        cout << \"-1\" << endl;\n        return 0;\n    }\n    \n    cout << (m >= size ? narcissusList[size - 1] : narcissusList[m]) << endl;\n    \n    return 0;\n}",
    "c": "#include <stdio.h>\n#include <math.h>\n#include <stdlib.h>\n\n// 判断一个数是否为水仙花数的函数声明\nint isNarcissusNumber(int num, int n);\n\nint main() {\n    int n, m;\n    \n    // 输入n和m\n    if (scanf(\"%d %d\", &n, &m) != 2) {\n        printf(\"-1\\n\");\n        return -1;\n    }\n\n    // 判断输入是否合法，n必须在3到7之间\n    if (n < 3 || n > 7) {\n        printf(\"-1\\n\");\n        return -1;\n    }\n    \n    // 计算n位数的范围\n    int start = pow(10, n - 1); // n位数的起始值，例如3位数从100开始\n    int end = pow(10, n);       // n位数的结束值，例如3位数到999结束\n\n    // 存储水仙花数的数组，最大长度为end - start\n    int narcissusList[end - start];\n    int count = 0; // 用于记录找到的水仙花数数量\n\n    // 遍历范围内的数，判断是否为水仙花数\n    for (int i = start; i < end; i++) {\n        if (isNarcissusNumber(i, n)) {\n            narcissusList[count++] = i; // 将水仙花数加入数组\n        }\n    }\n\n    // 若没有找到任何水仙花数，输出-1\n    if (count == 0) {\n        printf(\"-1\\n\");\n        return 0;\n    }\n\n    // 判断m的值是否超出找到的水仙花数的数量\n    if (m >= count) {\n        // m大于或等于水仙花数的数量时，返回最后一个水仙花数乘以m\n        printf(\"%ld\\n\", narcissusList[count - 1] * m);\n    } else {\n        // 否则，返回第m个水仙花数\n        printf(\"%ld\\n\", narcissusList[m]);\n    }\n\n    return 0;\n}\n\n// 判断一个数是否为水仙花数\nint isNarcissusNumber(int num, int n) {\n    int sum = 0;          // 用于存储各位数字的n次方和\n    int original_num = num; // 保留原始数值用于最后比较\n\n    // 逐位提取数字并计算n次方和\n    while (num > 0) {\n        int digit = num % 10;           // 获取当前数的最后一位数字\n        sum += pow(digit, n);           // 计算该数字的n次方并加到总和中\n        num /= 10;                      // 移除最后一位数字，继续处理剩下的数字\n    }\n\n    // 若n次方和等于原始数值，则该数为水仙花数\n    return sum == original_num;\n}"
  }
}