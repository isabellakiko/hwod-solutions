{
  "id": "17",
  "title": "字符串分割转换",
  "examType": "A",
  "score": 100,
  "description": "给定一个非空字符串S，其被N个‘-’分隔成N+1的子串，给定正整数K，要求除第一个子串外，其余的子串每K个字符组成新的子串，并用‘-’分隔。\n对于新组成的每一个子串，如果它含有的小写字母比大写字母多，则将这个子串的所有大写字母转换为小写字母；\n反之，如果它含有的大写字母比小写字母多，则将这个子串的所有小写字母转换为大写字母；大小写字母的数量相等时，不做转换。",
  "inputDesc": "输入为两行，第一行为参数K，第二行为字符串S。",
  "outputDesc": "输出转换后的字符串。",
  "examples": [
    {
      "input": "3\nabc-abCABc-4aB@",
      "output": "abc-abc-ABC-4aB-@",
      "explanation": "K=3，字符串为 abc-abCABc-4aB@。\n第一个子串 abc 保留不变。\n后面的子串合并为 abCABc4aB@，每3个字符一组：abC、ABc、4aB、@\n- abC：小写2个，大写1个，小写多，转为 abc\n- ABc：大写2个，小写1个，大写多，转为 ABC\n- 4aB：小写1个，大写1个，相等不转换\n- @：无字母，不转换\n结果：abc-abc-ABC-4aB-@"
    },
    {
      "input": "12\nabc-abCABc-4aB@",
      "output": "abc-abCABc4aB@",
      "explanation": "K=12，字符串为 abc-abCABc-4aB@。\n第一个子串 abc 保留。\n后面的子串合并为 abCABc4aB@（共10个字符），每12个字符一组，只有一组 abCABc4aB@。\n大写字母4个（C、A、B、B），小写字母4个（a、b、c、a），相等不转换。\n结果：abc-abCABc4aB@"
    }
  ],
  "solution": "**解题思路：**\n\n本题是一道**字符串处理**问题。\n\n**算法步骤：**\n\n1. **分割字符串**：用 '-' 分隔字符串S，得到 N+1 个子串\n2. **保留第一个子串**：第一个子串不做任何处理\n3. **合并其余子串**：将除第一个外的所有子串合并成一个连续字符串\n4. **重新分组**：按每 K 个字符分成若干组（最后一组可能不足K个）\n5. **大小写转换**：对每组统计大小写字母数量：\n   - 小写多 → 全转小写\n   - 大写多 → 全转大写\n   - 相等 → 不转换\n6. **输出结果**：第一个子串 + '-' + 新分组用'-'连接\n\n**时间复杂度**：O(n)，n为字符串长度",
  "codes": {
    "java": "import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        int k = Integer.parseInt(scanner.nextLine()); // 输入正整数K\n        String s = scanner.nextLine(); // 输入字符串S\n        String[] sArr = s.split(\"-\"); // 将S按照“-”分隔成N+1个子串\n        String prefix = sArr[0]; // 第一个子串\n        StringBuilder postfixSb = new StringBuilder(); // 除第一个子串外的所有子串\n        for (int i = 1; i < sArr.length; i++) {\n            postfixSb.append(sArr[i]);\n        }\n        char[] postfixChars = postfixSb.toString().toCharArray(); // 将除第一个子串外的所有子串拼接成字符数组\n        StringBuilder newSb = new StringBuilder();\n        for (int i = 0; i < postfixChars.length; i++) { // 将除第一个子串外的所有子串每K个字符组成新的子串，并用‘-’分隔\n            if ((i + 1) % k == 0 && i + 1 != postfixChars.length) {\n                newSb.append(postfixChars[i]).append(\"-\");\n            } else {\n                newSb.append(postfixChars[i]);\n            }\n        }\n        String[] newSArr = newSb.toString().split(\"-\"); // 将新组成的每一个子串按照“-”分隔\n        StringBuilder resultSb = new StringBuilder();\n        for (String str : newSArr) { // 对于新组成的每一个子串，如果它含有的小写字母比大写字母多，则将这个子串的所有大写字母转换为小写字母；反之，如果它含有的大写字母比小写字母多，则将这个子串的所有小写字母转换为大写字母；大小写字母的数量相等时，不做转换\n          \n            long upperCase = str.chars().filter(Character::isUpperCase).count();\n\n            long lowerCase = str.chars().filter(Character::isLowerCase).count();\n            if (upperCase > lowerCase) {\n                resultSb.append(str.toUpperCase()).append(\"-\");\n            } else if (lowerCase > upperCase) {\n                resultSb.append(str.toLowerCase()).append(\"-\");\n            } else {\n                resultSb.append(str).append(\"-\");\n            }\n        }\n        String postfix = resultSb.toString().substring(0, resultSb.length() - 1); // 将处理后的新组成的每一个子串按照“-”拼接成字符串\n        System.out.println(prefix + \"-\" + postfix); // 输出转换后的字符串\n    }\n}",
    "python": "k = int(input()) # 输入正整数K\ns = input() # 输入字符串S\nsArr = s.split(\"-\") # 将S按照“-”分隔成N+1个子串\nprefix = sArr[0] # 第一个子串\npostfixSb = \"\" # 除第一个子串外的所有子串\nfor i in range(1, len(sArr)):\n    postfixSb += sArr[i]\npostfixChars = list(postfixSb) # 将除第一个子串外的所有子串拼接成字符数组\nnewSb = \"\"\nfor i in range(len(postfixChars)): # 将除第一个子串外的所有子串每K个字符组成新的子串，并用‘-’分隔\n    if (i + 1) % k == 0 and i + 1 != len(postfixChars):\n        newSb += postfixChars[i] + \"-\"\n    else:\n        newSb += postfixChars[i]\nnewSArr = newSb.split(\"-\") # 将新组成的每一个子串按照“-”分隔\nresultSb = \"\"\nfor str in newSArr: # 对于新组成的每一个子串，如果它含有的小写字母比大写字母多，则将这个子串的所有大写字母转换为小写字母；反之，如果它含有的大写字母比小写字母多，则将这个子串的所有小写字母转换为大写字母；大小写字母的数量相等时，不做转换\n    upperCase = sum(1 for c in str if c.isupper())\n    lowerCase = sum(1 for c in str if c.islower())\n    if upperCase > lowerCase:\n        resultSb += str.upper() + \"-\"\n    elif lowerCase > upperCase:\n        resultSb += str.lower() + \"-\"\n    else:\n        resultSb += str + \"-\"\npostfix = resultSb[:-1] # 将处理后的新组成的每一个子串按照“-”拼接成字符串\nprint(prefix + \"-\" + postfix) # 输出转换后的字符串",
    "javascript": "const readline = require(\"readline\");\n \nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,\n});\n \nconst lines = [];\nrl.on(\"line\", (line) => {\n  lines.push(line);\n \n  if (lines.length === 2) {\n    const k = parseInt(lines[0]);\n    const s = lines[1];\n     const arr = s.split(\"-\");\n  const prefix = arr.shift();\n  const postfix = arr\n    .join(\"\")\n    .match(new RegExp(`.{1,${k}}`, \"g\"))\n    .map((str) => {\n      let upperCase = 0;\n      let lowerCase = 0;\n      [...str].forEach((char) => {\n        if (/[a-z]/.test(char)) lowerCase++;\n        if (/[A-Z]/.test(char)) upperCase++;\n      });\n      if (upperCase > lowerCase) {\n        return str.toUpperCase();\n      }\n      if (lowerCase > upperCase) {\n        return str.toLowerCase();\n      }\n      return str;\n    })\n    .join(\"-\");\n \n  \n    console.log(prefix + \"-\" + postfix);\n  }\n});",
    "cpp": "#include <iostream>\n#include <sstream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n    int k; // 用于存储输入的正整数K\n    string s; // 用于存储输入的字符串S\n    getline(cin, s); // 读取第一行输入，即正整数K\n    k = stoi(s); // 将字符串转换为整数K\n    getline(cin, s); // 读取第二行输入，即字符串S\n\n    vector<string> sArr; // 用于存储分割后的子串\n    size_t pos = 0;\n    while ((pos = s.find(\"-\")) != string::npos) { // 将字符串S按照“-”分隔成多个子串\n        string token = s.substr(0, pos); // 获取当前子串\n        sArr.push_back(token); // 将子串添加到数组中\n        s.erase(0, pos + 1); // 从原字符串中移除已处理的部分\n    }\n    sArr.push_back(s); // 添加最后一个子串（没有“-”的部分）\n\n    string prefix = sArr[0]; // 第一个子串，按照题目要求保留\n    string postfix; // 用于存储除第一个子串外的所有子串\n\n    for (int i = 1; i < sArr.size(); i++) {\n        postfix += sArr[i]; // 将所有其他子串拼接成一个字符串\n    }\n\n    vector<char> postfixChars(postfix.begin(), postfix.end()); // 将拼接后的字符串转换为字符数组\n\n    string newS = \"\"; // 用于存储重新分组后的字符串\n    for (int i = 0; i < postfixChars.size(); i++) {\n        if ((i + 1) % k == 0 && i + 1 != postfixChars.size()) {\n            newS += postfixChars[i]; // 添加当前字符\n            newS += '-'; // 在每K个字符后添加一个“-”作为分隔符\n        } else {\n            newS += postfixChars[i]; // 否则只添加当前字符\n        }\n    }\n\n    vector<string> newSArr; // 用于存储重新分组后的子串\n    pos = 0;\n    while ((pos = newS.find(\"-\")) != string::npos) { // 将重新分组后的字符串按照“-”分隔\n        string token = newS.substr(0, pos); // 获取每个新子串\n        newSArr.push_back(token); // 将子串添加到数组中\n        newS.erase(0, pos + 1); // 从原字符串中移除已处理的部分\n    }\n    newSArr.push_back(newS); // 添加最后一个子串\n\n    string result = \"\"; // 用于存储最终的结果字符串\n    for (string str : newSArr) {\n        int upperCase = count_if(str.begin(), str.end(), [](char c) { return isupper(c); }); // 统计大写字母的数量\n        int lowerCase = count_if(str.begin(), str.end(), [](char c) { return islower(c); }); // 统计小写字母的数量\n\n        // 根据大写字母和小写字母的数量决定是否进行大小写转换\n        if (upperCase > lowerCase) {\n            transform(str.begin(), str.end(), str.begin(), ::toupper); // 大写字母多，全部转换为大写\n            result += str; // 将转换后的子串添加到结果字符串中\n            result += '-'; // 添加“-”作为分隔符\n        } else if (lowerCase > upperCase) {\n            transform(str.begin(), str.end(), str.begin(), ::tolower); // 小写字母多，全部转换为小写\n            result += str; // 将转换后的子串添加到结果字符串中\n            result += '-'; // 添加“-”作为分隔符\n        } else {\n            result += str; // 大小写字母数量相等，不做转换，直接添加子串\n            result += '-'; // 添加“-”作为分隔符\n        }\n    }\n\n    result = result.substr(0, result.length() - 1); // 移除最后一个多余的“-”\n\n    cout << prefix << \"-\" << result << endl; // 输出最终的结果字符串\n\n    return 0;\n}",
    "c": "#include <stdio.h>\n#include <string.h>\n#include <ctype.h>\n\n#define MAX_LEN 500001 // 假设字符串的最大长度不超过500000\n\n// 函数：将子串中的字母根据大小写字母数量转换为全大写或全小写\nvoid convert(char *str) {\n    int upper = 0, lower = 0;\n    for (int i = 0; str[i] != '\\0'; i++) {\n        if (isupper(str[i])) upper++;\n        if (islower(str[i])) lower++;\n    }\n    for (int i = 0; str[i] != '\\0'; i++) {\n        if (upper > lower) str[i] = toupper(str[i]);\n        if (lower > upper) str[i] = tolower(str[i]);\n    }\n}\n\nint main() {\n    int k; // 输入正整数K\n    scanf(\"%d\\n\", &k);\n    \n    char s[MAX_LEN]; // 输入字符串S\n    fgets(s, MAX_LEN, stdin);\n    s[strcspn(s, \"\\n\")] = 0; // 去除换行符\n    \n    char *token = strtok(s, \"-\"); // 第一个子串\n    printf(\"%s\", token); // 输出第一个子串\n    \n    char postfix[MAX_LEN] = \"\"; // 除第一个子串外的所有子串\n    while ((token = strtok(NULL, \"-\")) != NULL) {\n        strcat(postfix, token);\n    }\n    \n    char newStr[MAX_LEN] = \"\"; // 新组成的字符串\n    int len = strlen(postfix);\n    for (int i = 0; i < len; i++) {\n        strncat(newStr, &postfix[i], 1); // 逐个字符拼接到新字符串中\n        if ((i + 1) % k == 0 && i + 1 != len) {\n            strcat(newStr, \"-\"); // 每K个字符后添加分隔符\n        }\n    }\n    \n    char *newToken = strtok(newStr, \"-\"); // 按照“-”分隔新组成的字符串\n    while (newToken != NULL) {\n        convert(newToken); // 转换子串中的字母\n        printf(\"-%s\", newToken); // 输出转换后的子串\n        newToken = strtok(NULL, \"-\"); // 继续获取下一个子串\n    }\n    \n    return 0;\n}"
  }
}